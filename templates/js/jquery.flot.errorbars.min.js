/* Flot plugin for plotting error bars.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

* Created by Rui Pereira  -  rui (dot) pereira (at) gmail (dot) com

*/
(function(w){function D(d,a,e,m){if(a.points.errorbars){d=[{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0}];e=a.points.errorbars;if("x"==e||"xy"==e)a.points.xerr.asymmetric&&d.push({x:!0,number:!0,required:!0}),d.push({x:!0,number:!0,required:!0});if("y"==e||"xy"==e)a.points.yerr.asymmetric&&d.push({y:!0,number:!0,required:!0}),d.push({y:!0,number:!0,required:!0});m.format=d}}function B(d,a,e,m,c,s,C,g,k,h,x){m+=h;c+=h;s+=h;"x"==a.err?(c>e+k?v(d,[[c,m],[Math.max(e+k,x[0]),m]]):C=!1,s<e-
k?v(d,[[Math.min(e-k,x[1]),m],[s,m]]):g=!1):(c<m-k?v(d,[[e,c],[e,Math.min(m-k,x[0])]]):C=!1,s>m+k?v(d,[[e,Math.max(m+k,x[1])],[e,s]]):g=!1);k=null!=a.radius?a.radius:k;C&&("-"==a.upperCap?"x"==a.err?v(d,[[c,m-k],[c,m+k]]):v(d,[[e-k,c],[e+k,c]]):w.isFunction(a.upperCap)&&("x"==a.err?a.upperCap(d,c,m,k):a.upperCap(d,e,c,k)));g&&("-"==a.lowerCap?"x"==a.err?v(d,[[s,m-k],[s,m+k]]):v(d,[[e-k,s],[e+k,s]]):w.isFunction(a.lowerCap)&&("x"==a.err?a.lowerCap(d,s,m,k):a.lowerCap(d,e,s,k)))}function v(d,a){d.beginPath();
d.moveTo(a[0][0],a[0][1]);for(var e=1;e<a.length;e++)d.lineTo(a[e][0],a[e][1]);d.stroke()}function E(d,a){var e=d.getPlotOffset();a.save();a.translate(e.left,e.top);w.each(d.getData(),function(d,c){if(c.points.errorbars&&(c.points.xerr.show||c.points.yerr.show)){var e=c.datapoints.points,v=c.datapoints.pointsize,g=[c.xaxis,c.yaxis],k=c.points.radius,h=[c.points.xerr,c.points.yerr],x=!1;if(g[0].p2c(g[0].max)<g[0].p2c(g[0].min)){var x=!0,t=h[0].lowerCap;h[0].lowerCap=h[0].upperCap;h[0].upperCap=t}var w=
!1;g[1].p2c(g[1].min)<g[1].p2c(g[1].max)&&(w=!0,t=h[1].lowerCap,h[1].lowerCap=h[1].upperCap,h[1].upperCap=t);for(var p=0;p<c.datapoints.points.length;p+=v){var y,b=c.datapoints.points,q=null,r=null,l=null,n=null;y=c.points.xerr;var f=c.points.yerr,u=c.points.errorbars;"x"==u||"xy"==u?y.asymmetric?(q=b[p+2],r=b[p+3],"xy"==u&&(f.asymmetric?(l=b[p+4],n=b[p+5]):l=b[p+4])):(q=b[p+2],"xy"==u&&(f.asymmetric?(l=b[p+3],n=b[p+4]):l=b[p+3])):"y"==u&&(f.asymmetric?(l=b[p+2],n=b[p+3]):l=b[p+2]);null==r&&(r=q);
null==n&&(n=l);b=[q,r,l,n];y.show||(b[0]=null,b[1]=null);f.show||(b[2]=null,b[3]=null);y=b;for(f=0;f<h.length;f++)if(b=[g[f].min,g[f].max],y[f*h.length]&&(q=e[p],r=e[p+1],l=[q,r][f]+y[f*h.length+1],n=[q,r][f]-y[f*h.length],"x"!=h[f].err||!(r>g[1].max||r<g[1].min||l<g[0].min||n>g[0].max)))if("y"!=h[f].err||!(q>g[0].max||q<g[0].min||l<g[1].min||n>g[1].max)){var A=u=!0;l>b[1]&&(u=!1,l=b[1]);n<b[0]&&(A=!1,n=b[0]);if("x"==h[f].err&&x||"y"==h[f].err&&w)t=n,n=l,l=t,t=A,A=u,u=t,t=b[0],b[0]=b[1],b[1]=t;q=
g[0].p2c(q);r=g[1].p2c(r);l=g[f].p2c(l);n=g[f].p2c(n);b[0]=g[f].p2c(b[0]);b[1]=g[f].p2c(b[1]);var t=h[f].lineWidth?h[f].lineWidth:c.points.lineWidth,z=null!=c.points.shadowSize?c.points.shadowSize:c.shadowSize;0<t&&0<z&&(z/=2,a.lineWidth=z,a.strokeStyle="rgba(0,0,0,0.1)",B(a,h[f],q,r,l,n,u,A,k,z+z/2,b),a.strokeStyle="rgba(0,0,0,0.2)",B(a,h[f],q,r,l,n,u,A,k,z/2,b));a.strokeStyle=h[f].color?h[f].color:c.color;a.lineWidth=t;B(a,h[f],q,r,l,n,u,A,k,0,b)}}}});a.restore()}w.plot.plugins.push({init:function(d){d.hooks.processRawData.push(D);
d.hooks.draw.push(E)},options:{series:{points:{errorbars:null,xerr:{err:"x",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null},yerr:{err:"y",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null}}}},name:"errorbars",version:"1.0"})})(jQuery);